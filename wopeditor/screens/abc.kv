#:kivy 2.0
#:import Factory kivy.factory.Factory


<FocusButton>:
    bold: self.focus


<SymbolButton>:
    size: [max(self.texture_size[0] +40, 100), self.texture_size[1] + 40]
    font_size: 24
    size_hint: None, None
    on_release: app.goto_symbol(self.symbol)


<LabeledTextInput@BoxLayout>:
    label_text: 'label'
    text: text_input.text
    spacing: 10
    size_hint: 1, None
    height: text_input.height

    Label:
        size_hint_x: 0.5
        text: root.label_text
        text_size: self.size
        halign: 'right'
        valign: 'center'

    AnchorLayout:
        anchor_y: 'center'
        TextInput:
            id: text_input
            size_hint: 1, None
            height: self.font_size * 2
            multiline: False
            write_tab: False


<NewSymbolPopup>:
    size_hint: None, None
    width: 400
    height: name_input.height * 3 + confirm_button.height + self.title_size + dp(80)
    title: "create new symbol"
    on_open: name_input.ids['text_input'].focus = True
    on_confirm: app.add_new_symbol(self.symbol)
    BoxLayout:
        id: content
        orientation: 'vertical'
        padding: [0, 5, 0, 0]
        spacing: 5
        LabeledTextInput:
            id: name_input
            label_text: "name:"
            focus: True
        LabeledTextInput:
            id: meaning_input
            label_text: "meaning:"
        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'top'
            Label:
                id: warning_label
                color: 'red'
                text: ''

        FocusButton:
            id: confirm_button
            text: 'CREATE NEW SYMBOL'
            size_hint: 1, None
            font_size: '20sp'
            height: self.texture_size[1] * 2.2
            on_release: root.confirm()


AbcScreen:
    name: "abc"

    GridLayout:
        cols: 1
        padding: [10, 0]

        Header:
            id: header
            on_press_back: app.goto_abcs(back_from=root.name)

        GridLayout:
            rows: 1
            GridLayout:
                id: sidebar
                cols: 1
                padding: 0, 0, 30, 0
                size_hint_x: None
                width: 200
                spacing: 5
                Button:
                    text: "new symbol"
                    size_hint: None, None
                    height: 40
                    on_release: root.show_create_new_symbol()
                Button:
                    text: "open dir"
                    size_hint: None, None
                    height: 40
                    on_release: root.open_dir()
            StackLayout:
                id: symbols_list
                spacing: 5